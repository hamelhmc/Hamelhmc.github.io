---
import type { Portafolio } from '@/data/model/manfred.interface';
import SocialPill from './SocialPill.astro';
import LinkedInIcon from '@/components/icons/LinkedIn.astro';
import MailIcon from '@/components/icons/Mail.astro';
import GitHubIcon from '@/components/icons/GitHub.astro';
import XIcon from '@/components/icons/X.astro';
import { Image } from 'astro:assets';
import myLogo from '../assets/hmc.png';

const currentYear = new Date().getFullYear();

const { aboutMe, careerPreferences } = Astro.props as Portafolio;

const publicProfiles = careerPreferences.contact.publicProfiles;
const contactMails = careerPreferences.contact.contactMails;

const socialMediaLinks = {
  linkedin: publicProfiles.find((p) => p.type === 'linkedin')?.URL || '',
  github: publicProfiles.find((p) => p.type === 'github')?.URL || '',
  twitter: publicProfiles.find((p) => p.type === 'twitter')?.URL || '',
  email: contactMails[0] || '',
};

const location = `${aboutMe.profile.location.municipality}, ${aboutMe.profile.location.region}, ${aboutMe.profile.location.country}`;
---

<footer class="py-12 mt-8" role="contentinfo">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Gradient line separator -->
    <div class="w-full h-px bg-gradient-to-r from-transparent via-primary/30 to-transparent mb-8" aria-hidden="true"></div>

    <div class="flex flex-col md:flex-row items-center justify-between gap-6">
      <!-- Left: Logo + Name -->
      <div class="flex items-center gap-3">
        <Image src={myLogo} alt="Logo HMC" width={28} height={28} class="rounded-lg" />
        <span class="text-sm font-medium text-gray-600 dark:text-txt-secondary">
          {aboutMe.profile.name}
          {aboutMe.profile.surnames}
        </span>
      </div>

      <!-- Center: Location -->
      <span class="text-sm text-gray-500 dark:text-txt-tertiary">
        {location}
      </span>

      <!-- Right: Social links + Copyright -->
      <div class="flex items-center gap-4">
        <div class="flex items-center gap-2">
          {
            socialMediaLinks.email && (
              <a
                href={`mailto:${socialMediaLinks.email}`}
                class="p-2 text-gray-500 dark:text-txt-tertiary hover:text-primary transition-colors"
                aria-label="Enviar email">
                <MailIcon class="w-5 h-5" />
              </a>
            )
          }
          {
            socialMediaLinks.linkedin && (
              <a
                href={socialMediaLinks.linkedin}
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-gray-500 dark:text-txt-tertiary hover:text-primary transition-colors"
                aria-label="LinkedIn">
                <LinkedInIcon class="w-5 h-5" />
              </a>
            )
          }
          {
            socialMediaLinks.github && (
              <a
                href={socialMediaLinks.github}
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-gray-500 dark:text-txt-tertiary hover:text-primary transition-colors"
                aria-label="GitHub">
                <GitHubIcon class="w-5 h-5" />
              </a>
            )
          }
          {
            socialMediaLinks.twitter && (
              <a
                href={socialMediaLinks.twitter}
                target="_blank"
                rel="noopener noreferrer"
                class="p-2 text-gray-500 dark:text-txt-tertiary hover:text-primary transition-colors"
                aria-label="Twitter">
                <XIcon class="w-5 h-5" />
              </a>
            )
          }
        </div>
        <span class="hidden md:inline text-xs text-gray-400 dark:text-txt-tertiary">
          © {currentYear}
        </span>
      </div>
    </div>

    <!-- Mobile copyright -->
    <div class="md:hidden text-center mt-6">
      <span class="text-xs text-gray-400 dark:text-txt-tertiary">
        © {currentYear}
        {aboutMe.profile.name}. Diseñado con precisión.
      </span>
    </div>
  </div>
</footer>
