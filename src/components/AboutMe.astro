---
import type { Knowledge, AboutMe as AboutMeType } from '@/data/model/manfred.interface';

interface Props {
  knowledge: Knowledge;
  aboutMe: AboutMeType;
}

const { knowledge, aboutMe } = Astro.props;

// Soft skills
const softSkills = knowledge.softSkills.map((s) => s.skill.name);

// Languages
const languages = knowledge.languages;

// Interests from interesting facts
const interests = aboutMe.interestingFacts || [];
---

<section id="sobre-mi" class="py-24 scroll-mt-20" aria-labelledby="about-heading">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16 space-y-4">
      <span class="text-primary font-semibold text-sm tracking-[0.2em] uppercase">Sobre MÃ­</span>
      <h2 id="about-heading" class="text-balance text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-txt-primary tracking-tight">
        MÃ¡s allÃ¡ del cÃ³digo
      </h2>
    </div>

    <!-- Cards Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Soft Skills Card -->
      <article class="h-full p-8 rounded-2xl bg-white/50 dark:bg-glass border border-gray-200/50 dark:border-glass-border backdrop-blur-xl">
        <span class="text-primary font-semibold text-xs tracking-[0.15em] uppercase mb-6 block">Habilidades Blandas</span>
        <ul class="space-y-4" role="list">
          {
            softSkills.map((skill) => (
              <li class="flex items-center gap-3">
                <div class="w-2 h-2 rounded-full bg-primary" aria-hidden="true" />
                <span class="text-gray-800 dark:text-txt-secondary">{skill}</span>
              </li>
            ))
          }
        </ul>
      </article>

      <!-- Languages Card -->
      <article class="h-full p-8 rounded-2xl bg-white/50 dark:bg-glass border border-gray-200/50 dark:border-glass-border backdrop-blur-xl">
        <span class="text-primary font-semibold text-xs tracking-[0.15em] uppercase mb-6 block">Idiomas</span>
        <div class="space-y-4">
          {
            languages.map((lang) => (
              <div class="space-y-2">
                <div class="flex items-center justify-between">
                  <span class="text-gray-800 dark:text-txt-primary font-medium">{lang.fullName}</span>
                  <span class="text-xs text-gray-500 dark:text-txt-tertiary">{lang.name}</span>
                </div>
                <div
                  class="w-full h-1.5 bg-gray-200 dark:bg-glass-strong rounded-full overflow-hidden"
                  role="progressbar"
                  aria-label={`Nivel de ${lang.fullName}`}>
                  <div
                    class="h-full bg-gradient-to-r from-primary-400 to-primary-500 rounded-full transition-all duration-500"
                    style={`width: ${
                      lang.level.includes('Native')
                        ? '100%'
                        : lang.level.includes('Full')
                        ? '90%'
                        : lang.level.includes('Professional')
                        ? '75%'
                        : '50%'
                    }`}
                  />
                </div>
                <span class="text-xs text-gray-500 dark:text-txt-tertiary">{lang.level}</span>
              </div>
            ))
          }
        </div>
      </article>

      <!-- Interests Card -->
      <article class="h-full p-8 rounded-2xl bg-white/50 dark:bg-glass border border-gray-200/50 dark:border-glass-border backdrop-blur-xl">
        <span class="text-primary font-semibold text-xs tracking-[0.15em] uppercase mb-6 block">Intereses</span>
        {
          interests.length > 0 ? (
            <div class="space-y-4">
              {interests.map((item) => (
                <div class="space-y-2">
                  <p class="text-gray-600 dark:text-txt-secondary text-sm leading-relaxed">
                    {item.fact
                      .replace(/\\n/g, ' ')
                      .replace(/ğŸ¡|ğŸ¢|ğŸ’»|ğŸ§|ğŸŸ¡/g, '')
                      .trim()}
                  </p>
                </div>
              ))}
              <div class="flex items-center gap-2 pt-2">
                <div class="w-6 h-6 rounded-full bg-yellow-400" aria-label="Amarillo" />
                <span class="text-sm text-gray-600 dark:text-txt-secondary">Color favorito</span>
              </div>
            </div>
          ) : (
            <p class="text-gray-600 dark:text-txt-secondary text-sm">
              Apasionado del teletrabajo y trabajo hÃ­brido. Desarrollo tanto frontend como backend. Fan de Mac y Linux.
            </p>
          )
        }
      </article>
    </div>
  </div>
</section>
